[{"path":"https://github.com/biomass-dynamic-models/bdm/articles/bdm-example.html","id":"chatham-rise-hake","dir":"Articles","previous_headings":"","what":"Chatham Rise Hake","title":"Example application of `bdm`","text":"model fitted data chatham rise hake fishery New Zealand, consists catches, commerical abundance index survey index. data used initialise empirical data object (bdmData) checks data appropriate format. See ?bdmData details. Chatham rise hake data","code":"data(haknz) dat <- bdmData(harvest = haknz$landings, index = cbind(haknz$survey, haknz$cpue),     time = haknz$year, renormalise = TRUE) plot(dat)"},{"path":"https://github.com/biomass-dynamic-models/bdm/articles/bdm-example.html","id":"development-of-a-prior-for-r","dir":"Articles","previous_headings":"Chatham Rise Hake","what":"Development of a prior for rr","title":"Example application of `bdm`","text":"Life history data available, allowing us populate object lhm class, obtained lhm (life-history module) package, used store manipulate life-history data. Monte-carlo samples generated, application lhm::rCalc function class object calcuates values rr iteration, producing object prior class. prior class contains numeric vector additional slot holding parameters associated distribution. Currenly log-normal distribution supported, parameters stored object@lognormal_par. Prior rr generated life-history data chatham rise hake.","code":"# initialise lhm data object for calculation of r with uncertainty rdat <- lhm(ainf = 100, iter = 200)  # then life-history vectors can be assigned to each iteration with or # without uncertainty nmort(rdat) <- list(mu = 0.18) maturity(rdat) <- c(0, 0.01, 0.02, 0.06, 0.14, 0.28, 0.5, 0.72, 0.86, 0.94,     0.98, 0.99, 1) size(rdat) <- list(mu = list(Linf = 106.5, k = 0.229, t0 = 0.01)) mass(rdat) <- list(mu = list(a = 1.88e-09, b = 3.305)) sr(rdat) <- list(type = \"BH\", mu = 0.9, cv = 0.1)  # calculate r prior and fit log-normal distribution r <- rCalc(rdat) plot(r)"},{"path":"https://github.com/biomass-dynamic-models/bdm/articles/bdm-example.html","id":"estimation-of-depletion","dir":"Articles","previous_headings":"Chatham Rise Hake","what":"Estimation of depletion","title":"Example application of `bdm`","text":"default model initialised using bdm() command, arguments. Arguments can supplied form alternative model code. default initialisation loads generalised surplus production model, used example. Following initialisation model, prior information rr, contained prior object, can loaded using updatePrior function, takes input bdm prior objects. function updates model code directly, following must compiled. Note also possible update priors model code using list argument updatePrior (see ?updatePrior details). default generalised surplus production model allows depletion maximum sustainable yield (MSY) fixed user. depletion MSY (ϕ\\phi) forms part model inputs encoded bdmData object can accessed assigned using shape() function. chatham rise hake assume MSY occurs 40% carrying capacity (.e. ϕ=0.4\\phi=0.4). model can run using sampler() function, makes use R-package rstan implement MCMC sampling routine. Arguments match used sampling() function rstan. Trace, posterior histogram cumulative density plots can produced using traceplot(), histplot() cumsumplot() functions, respectively. Traceplots chatham rise hake fit. Posterior histograms chatham rise hake fit. Cumulative posterior denisty plot chatham rise hake fit.","code":"mdl <- bdm() mdl <- updatePrior(mdl, r) mdl <- compiler(mdl) shape(dat) <- 0.4 mdl <- sampler(mdl, dat, run = \"NZ hake\", chains = 2, iter = 2000, init = \"fixed\") traceplot(mdl, inc_warmup = FALSE) + theme_bw() histplot(mdl, par = c(\"r\", \"logK\", \"q\")) cumsumplot(mdl, par = c(\"r\", \"logK\"))"},{"path":"https://github.com/biomass-dynamic-models/bdm/articles/bdm-example.html","id":"model-outputs","dir":"Articles","previous_headings":"Chatham Rise Hake","what":"Model outputs","title":"Example application of `bdm`","text":"can plot model outputs using dynplot() function, default plots depletion() trajectory time. Currently can also used visualise biomass, surplus_production, harvest_rate. Estimated depletion chatham rise hake. Plotting functions traceplot(), histplot() dynplot() return graphical objects ggplot2 package can modified printed. example, add title plot surplus production change y-axis one type: can use function refpoints extract reference point information fitted model object list contains msy, depletion_at_msy (equal ϕ\\phi), biomass_at_msy harvest_rate_at_msy. reference points functions rr, KK ϕ\\phi, therefore (exception ϕ\\phi ) posterior distribution. can extract median values write table using pander::pandoc.table: Similarly, function status() can used access posterior distributions current_biomass, current_depletion current_harvest_rate, correspond final assessment year, .e. dat$time[dat$T]. easily plot histograms, using example: Current status estimates chatham rise hake. Note depletion given relative KK. robust estimate status status relative MSYMSY. Neverthelessw, desired, extract status relative MSYMSY based reference points using combination refpoints() status() functions.","code":"dynplot(mdl) gg <- dynplot(mdl, pars = c(\"harvest_rate\", \"depletion\")) gg <- gg + ggtitle(\"Model predicted dynamics\") + theme_bw() print(gg) knitr::kable(data.frame(lapply(refpoints(mdl), median)), digits = 2) sta <- status(mdl) dfr <- bind_rows(lapply(names(sta), function(x) data.frame(name = x, value = as.numeric(sta[[x]])))) gg <- ggplot(dfr) + geom_histogram(aes(x = value)) + facet_wrap(~name, scales = \"free_x\",     ncol = 2) print(gg)"},{"path":"https://github.com/biomass-dynamic-models/bdm/articles/bdm-example.html","id":"the-kobe-package","dir":"Articles","previous_headings":"Chatham Rise Hake","what":"The kobe package","title":"Example application of `bdm`","text":"possible produce kobe plots using .kobe function, creates data.frame appropriate format kobe package. Kobe risk assessment framework developed scientists International Commission Conservation Atlantic Tunas (ICCAT), means presenting status advice. stock assessed relative BMSYB_{MSY} HMSYH_{MSY}. B<BMSYB < B_{MSY} classified overfished. H>HMSYH > H_{MSY} overfishing taking place. Status can visualised kobe phase plot, produced using kobe::kobePhase function. Kobe plot current stock status. .kobe function can also used produce summary stock status time; specifically probability stock green, red yellow quadrants phase plane. current status estimates stock can obtained similar manner reference points .","code":"assmt <- as.kobe(mdl, year = max(mdl@data$time)) kobePhase(assmt) + geom_point(aes(stock, harvest), alpha = 0.5, col = \"grey\") +     geom_density2d(aes(stock, harvest), col = \"blue\", linewidth = 1) assmt <- as.kobe(mdl, what = \"summary\") knitr::kable(assmt, digits = 2) knitr::kable(data.frame(lapply(status(mdl), median)), digits = 2)"},{"path":"https://github.com/biomass-dynamic-models/bdm/articles/bdm-example.html","id":"projections","dir":"Articles","previous_headings":"Chatham Rise Hake","what":"Projections","title":"Example application of `bdm`","text":"Based can perform projections exploring alternative constant harvest rate options. project function returns list (see ?project) can manipulated summarise results. example:","code":"# project forward under a variety of constant harvest rate scenarios mdl.project <- project(mdl, harvest = c(0.01, 0.025, 0.05), time = 100)  # generate depletion results table dep.project <- apply(mdl.project$depletion, 2:3, median) knitr::kable(apply(mdl.project$depletion, 2:3, median)[nrow(dep.project), ,     drop = FALSE], digits = 2) # display kobe plot proj <- as.kobe(mdl, mdl.project, year = max(mdl@data$time)) kobePhase(proj) + geom_point(aes(stock, harvest, col = projection_value))"},{"path":"https://github.com/biomass-dynamic-models/bdm/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Charles T T Edwards. Maintainer.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Edwards CTT (2026). bdm: Bayesian biomass dynamics model. R package version 1.0.0, https://github.com/biomass-dynamic-models/bdm.","code":"@Manual{,   title = {bdm: Bayesian biomass dynamics model},   author = {Charles T T Edwards},   year = {2026},   note = {R package version 1.0.0},   url = {https://github.com/biomass-dynamic-models/bdm}, }"},{"path":[]},{"path":"https://github.com/biomass-dynamic-models/bdm/index.html","id":"instructions","dir":"","previous_headings":"","what":"Instructions","title":"Bayesian biomass dynamics model","text":"First, install rstan remotes packages CRAN: install bdm directly GitHub: life history module lhm required estimate intrinsic growth rate:","code":"# Install packages install.packages(\"remotes\") install.packages(\"rstan\") # remotes command to get bdm from GitHub remotes::install_github(\"biomass-dynamic-models/bdm\") # remotes command to get lhm from GitHub remotes::install_github(\"biomass-dynamic-models/lhm\")"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albio.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — albio","title":"Example data — albio","text":"Example dataset containing catch catch per unit effort (CPUE) data Indian Ocean albacore 1967 1989. catch catch thousand tonnes cpue catch per unit effort kilograms per hundred hooks","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albio.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — albio","text":"","code":"albio"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albio.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example data — albio","text":"Polacheck, T., R. Hilborn, .E. Punt, Fitting surplus production models: comparing models measuring uncertainty. Canadian Journal Fisheries Aquatic Sciences, 1993. 50(12): p. 2597-2607.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albna.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — albna","title":"Example data — albna","text":"Example catch catch rate data North Atlantic albacore (ICCAT)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — albna","text":"","code":"albna"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albsa.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — albsa","title":"Example data — albsa","text":"Example catch catch rate data South Atlantic albacore (ICCAT)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/albsa.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — albsa","text":"","code":"albsa"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.bdm.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a stanfit object into a bdm object — as.bdm","title":"Convert a stanfit object into a bdm object — as.bdm","text":"Useful producing plots bdm package functions histplot","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.bdm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a stanfit object into a bdm object — as.bdm","text":"","code":"as.bdm(object, ...)  # S3 method for class 'stanfit' as.bdm(object, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.bdm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a stanfit object into a bdm object — as.bdm","text":"object stanfit class object. ... additional arguments generic function","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.bdm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert a stanfit object into a bdm object — as.bdm","text":"Returns bdm object containing MCMC outputs","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.kobe.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a bdm object to a format suitable for the kobe package — as.kobe","title":"Convert a bdm object to a format suitable for the kobe package — as.kobe","text":"kobe package (https://github.com/flr/kobe) can used produce diagnostic outputs concerning status stock relative MSY-based reference points.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.kobe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a bdm object to a format suitable for the kobe package — as.kobe","text":"","code":"as.kobe(.Object, ...)  # S4 method for class 'bdm' as.kobe(   .Object,   projection,   what = c(\"samples\", \"summary\")[1],   prob = c(0.75, 0.5, 0.25),   year = NULL )"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.kobe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a bdm object to a format suitable for the kobe package — as.kobe","text":".Object bdm class object ... arguments generic function (used) projection optional list containing results call project one \"samples\" \"summary\" prob probabilities used calculation summary statistics per year year year years included output","code":""},{"path":[]},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/as.kobe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert a bdm object to a format suitable for the kobe package — as.kobe","text":"","code":"# see vignette if (FALSE) { # \\dontrun{ vignette('bdm-examples') } # }"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdm-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Class definition for bdm object — bdm-class","title":"Class definition for bdm object — bdm-class","text":"primary object class bdm package. inherits stanmodel superclass.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdm-class.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Class definition for bdm object — bdm-class","text":"","code":"bdm(path, model_code, model_name = \"\")"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdm-class.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Class definition for bdm object — bdm-class","text":"path path stan code model_code model code character string model_name optional model name","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdm-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Class definition for bdm object — bdm-class","text":"data list input data inits list initial values chains number chains iter number samples chain warmup 'burnin' period chain thin period sampling chain nsamples resultant number samples retained sample run trace list holding processed samples extract(..., permuted = TRUE, inc_warmup = FALSE). trace_array array holding processed samples extract(..., permuted = FALSE, inc_warmup = TRUE). rarely needed direct access used diagnostic plots. pars character vector estimated parameters. map list containing maximum posterior model fit model_name character string giving model name. model_code model code Stan modelling language. model_cpp translation Stan code C++. dso object class cxxdso holding compiled C++ code dynamic shared object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdm-class.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Class definition for bdm object — bdm-class","text":"","code":"# initialise default model object mdl <- bdm()  # inspect Stan model code"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdmData-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Class containing input data for model run — bdmData-class","title":"Class containing input data for model run — bdmData-class","text":"S4 object class extends list base type allows error checking performed construction ensure formatting appropriate bdm model run","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdmData-class.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Class containing input data for model run — bdmData-class","text":"","code":"bdmData(index, harvest, time, n, sigmao, sigmap, renormalise = FALSE)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdmData-class.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Class containing input data for model run — bdmData-class","text":"index Matrix abundance index values harvest Numeric vector catch values time Character vector time values n Shape parameter generalised production function sigmao Matrix observation error values dimensions equal index sigmap Numeric value specifying process error renormalise Logical value indicating whether indices renormalised arithmetic mean one","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdmData-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Class containing input data for model run — bdmData-class","text":".Data list containing input data names names list item T Number discrete time steps data Number abundance indices index Matrix abundance index values, nrow(index)==T ncol(index)==. harvest Numeric vector catch values, length(harvest)==T time Character vector time lables e.g. year values. n Shape parameter \\(n\\) generalised surplus production model. sigmap Log-normal process error scale parameter \\(\\sigma_p\\) sigmao Matrix log-normal observation error scale parameters \\(\\sigma_o\\) dimensions equal index","code":""},{"path":[]},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bdmData-class.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Class containing input data for model run — bdmData-class","text":"","code":"# load Indian Ocean albacore data data(albio)  # create data object dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = rownames(albio))"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bnsnz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — bnsnz","title":"Example data — bnsnz","text":"Example catch catch rate data New Zeland bluenose (Ministry Primary Industries, New Zealand)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/bnsnz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — bnsnz","text":"","code":"bnsnz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/compiler.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile stan model code in bdm object — compiler","title":"Compile stan model code in bdm object — compiler","text":"function calls stan_model compile model.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/compiler.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile stan model code in bdm object — compiler","text":"","code":"compiler(object, ...)  # S4 method for class 'bdm' compiler(object, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/compiler.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compile stan model code in bdm object — compiler","text":"object bdm class object contains model code object@model_code ... additional arguments stan_model","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/compiler.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile stan model code in bdm object — compiler","text":"bdm class object compiled DSO object@dso.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/compiler.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile stan model code in bdm object — compiler","text":"","code":"library(bdm)  # initialise default model object mdl <- bdm()  # compile Stan model code if (FALSE) { # \\dontrun{ mdl <- compiler(mdl) } # }"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/cumsumplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot cumulative sum of MCMC chain — cumsumplot","title":"Plot cumulative sum of MCMC chain — cumsumplot","text":"Plots cumulative sum ordered posterior samples MCMC chain contained within bdm class object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/cumsumplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot cumulative sum of MCMC chain — cumsumplot","text":"","code":"cumsumplot(object, ...)  # S3 method for class 'bdm' cumsumplot(   object,   pars = c(\"r\", \"logK\", \"lp__\"),   inc_warmup = FALSE,   nrow = NULL,   ncol = NULL,   ... )"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/cumsumplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot cumulative sum of MCMC chain — cumsumplot","text":"object bdm class object. ... optional arguments geom_line pars character vector model parameters plotted. Defaults pars = c('r','logK','lp__'). inc_warmup logical value indicating whether MCMC warmup included plot. nrow passed facet_wrap ncol passed facet_wrap","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/cumsumplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot cumulative sum of MCMC chain — cumsumplot","text":"Returns ggplot object can displayed assigned manuipulated using arguments ggplot2 package.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dot-array2dfr.html","id":null,"dir":"Reference","previous_headings":"","what":"MCMC array to data frame — .array2dfr","title":"MCMC array to data frame — .array2dfr","text":"MCMC array data frame","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dot-array2dfr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MCMC array to data frame — .array2dfr","text":"","code":".array2dfr(object, value_to = \"value\")"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dot-array2dfr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MCMC array to data frame — .array2dfr","text":"object bdm class object value_to column header array value","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dynplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot estimated dynamics from bdm model fit — dynplot","title":"Plot estimated dynamics from bdm model fit — dynplot","text":"Plots dynamics time estimated biomass, depletion, harvest rate surplus production.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dynplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot estimated dynamics from bdm model fit — dynplot","text":"","code":"dynplot(object, ...)  # S3 method for class 'bdm' dynplot(object, ..., pars = \"depletion\", labels = character())"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dynplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot estimated dynamics from bdm model fit — dynplot","text":"object bdm class object. ... additional bdm class objects pars character vector model parameters plotted. Must one 'depletion', 'biomass', 'harvest_rate' 'surplus_production'. labels character vector labels per model run","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dynplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot estimated dynamics from bdm model fit — dynplot","text":"Returns ggplot object can displayed assigned manuipulated using arguments ggplot2 package. plotted dynamics summarised median 75th 95th percentiles. posterior mean shown dashed line.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/dynplot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot estimated dynamics from bdm model fit — dynplot","text":"Depletion measured biomass carrying capacity, harvest rate catch estimated biomass, surplus production production function multiplied process error residual. Multiple model runs can provided, case superimposed.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/elenz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — elenz","title":"Example data — elenz","text":"Example catch catch rate data New Zeland elephant fish (ELE3, Ministry Primary Industries, New Zealand)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/elenz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — elenz","text":"","code":"elenz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getcpp.html","id":null,"dir":"Reference","previous_headings":"","what":"Return C++ code generated by rstan — getcpp","title":"Return C++ code generated by rstan — getcpp","text":"Return C++ code generated rstan","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getcpp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return C++ code generated by rstan — getcpp","text":"","code":"getcpp(object, ...)  # S3 method for class 'bdm' getcpp(object, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getcpp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return C++ code generated by rstan — getcpp","text":"object bdm class object ... additional arguments generic function","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getlogK.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract an initial value for the carrying capacity — getlogK","title":"Extract an initial value for the carrying capacity — getlogK","text":"function can applied list bdmData object provide rough estimate \\(ln(K)\\). rarely required user. Rather, designed used part initialisation model fit using sampler.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getlogK.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract an initial value for the carrying capacity — getlogK","text":"","code":"getlogK(object, ...)  # S3 method for class 'bdm' getlogK(object, ...)  # S3 method for class 'bdmData' getlogK(object, r, interval, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getlogK.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract an initial value for the carrying capacity — getlogK","text":"object either bdm class object list object containing elements index (array) harvest (vector) ... additional arguments generic function r assumed value intrinsic growth rate \\(r\\) interval vector containing minimum maximum values \\(ln(K)\\) grid search performed.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getlogK.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract an initial value for the carrying capacity — getlogK","text":"applied bdm class object, function uses regual expresssion matching extract interval \\(ln(K)\\) model code. value \\(r\\) similarly extracted using getr. assumes logistic production function applies grid search interval \\(ln(K)\\), using least-squares measure fit. function can also applied bdmData object, case value \\(r\\) search interval must provided. value \\(r\\) usually obtained call rCalc lhm package.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getlogK.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract an initial value for the carrying capacity — getlogK","text":"","code":"# get some data data(albio) dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = albio$year)  # default model mdl <- bdm()  # extract logK from # bdm object getlogK(mdl) #> $`E[logK]` #> NULL #>  #> $`min[logK]` #> [1] 1 #>  #> $`max[logK]` #> [1] 12 #>   # extract with data mdl@data <- dat getlogK(mdl) #> $`E[logK]` #> [1] 5.371371 #>  #> $`min[logK]` #> [1] 1 #>  #> $`max[logK]` #> [1] 12 #>   # calculate logK from # catches and assumed r getlogK(dat, r = getr(mdl)$`E[r]`, interval = c(1, 12)) #> [1] 5.371371"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getparams.html","id":null,"dir":"Reference","previous_headings":"","what":"Return model parameters (including input data) — getparams","title":"Return model parameters (including input data) — getparams","text":"Return model parameters (including input data)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getparams.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return model parameters (including input data) — getparams","text":"","code":"getparams(object, ...)  # S3 method for class 'bdm' getparams(object, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getparams.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return model parameters (including input data) — getparams","text":"object bdm class object ... additional arguments generic function","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getr.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract log-normal parameters for the prior on intrinsic growth rate \\(r\\) — getr","title":"Extract log-normal parameters for the prior on intrinsic growth rate \\(r\\) — getr","text":"applied bdm class object function uses regular expression matching extract log-normal distribution parameters \\(r\\) model code. default bdm package assumes prior intrinsic growth rate can described log-normal distribution parameters \\(\\mu\\) \\(\\sigma\\), correspond mean standard deviation \\(\\ln(r)\\).","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract log-normal parameters for the prior on intrinsic growth rate \\(r\\) — getr","text":"","code":"getr(object, ...)  # S3 method for class 'bdm' getr(object, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract log-normal parameters for the prior on intrinsic growth rate \\(r\\) — getr","text":"object object appropriate class ... additional arguments generic function","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract log-normal parameters for the prior on intrinsic growth rate \\(r\\) — getr","text":"list containing elements 'E[log(r)]' (equal \\(\\mu\\)), 'SD[log(r)]' (equal \\(\\sigma\\)), 'E[r]', 'VAR[r]' 'CV[r]'.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract log-normal parameters for the prior on intrinsic growth rate \\(r\\) — getr","text":"","code":"# default model mdl <- bdm()  # extract r from # bdm object getr(mdl) #> $`E[log(r)]` #> [1] -1 #>  #> $`SD[log(r)]` #> [1] 0.2 #>  #> $`E[r]` #> [1] 0.3753111 #>  #> $`VAR[r]` #> [1] 0.005748541 #>  #> $`CV[r]` #> [1] 0.2020168 #>"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getx.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate an initial vector of depletion values — getx","title":"Estimate an initial vector of depletion values — getx","text":"function can applied list bdmData object provide rough estimate depletion time series \\(x\\). function assumes logistic production function uses input values intrinsic growth carrying capacity. usually obtained calls rCalc lhm package getlogK.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate an initial vector of depletion values — getx","text":"","code":"getx(object, ...)  # S3 method for class 'bdm' getx(object, ...)  # S3 method for class 'list' getx(object, r, logK, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate an initial vector of depletion values — getx","text":"object either bdm class object list object containing harvest vector ... additional arguments generic function r assumed value intrinsic growth rate \\(r\\) logK assumed value carrying capacity \\(ln(K)\\)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/getx.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate an initial vector of depletion values — getx","text":"","code":"# get some data data(albio) dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = rownames(albio))  # default model mdl <- bdm()  # extract depletion from # bdm object getx(mdl) #> $`E[x]` #> NULL #>   # extract with data mdl@data <- dat getx(mdl) #> $`E[x]` #>  [1] 1.0000000 0.9261007 0.8323391 0.7522531 0.7120474 0.6728058 0.6006560 #>  [8] 0.5596146 0.5605478 0.5716640 0.5738626 0.5652514 0.5501181 0.5384287 #> [15] 0.5271278 0.5109924 0.4695252 0.4960767 0.5285484 0.4900741 0.4230526 #> [22] 0.3403675 0.3042546 #>   # calculate depletion from # catches and assumed parameters getx(dat, logK = 6, r = exp(-1)) #>  [1] 1.0000000 0.9605878 0.9108114 0.8700513 0.8528981 0.8370845 0.8047113 #>  [8] 0.7926231 0.8042606 0.8187961 0.8255381 0.8249809 0.8208389 0.8191682 #> [15] 0.8178908 0.8141863 0.7977099 0.8213802 0.8426340 0.8210190 0.7893129 #> [22] 0.7575373 0.7609077"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/haknz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — haknz","title":"Example data — haknz","text":"Example dataset containing catch, catch per unit effort (CPUE) trawl survey abundance data hake New Zealand (Chatham Rise stock) 1975 2012. year fishing year (.e. 1975 September 1974 August 1975) landings estimated landings tonnes survey research survey biomass tonnes survey_cv estimated research survey index coefficient variation cpue standardised CPUE tonnes per tow Eastern Chatham Rise cpue_cv estimated CPUE coefficient variation standardisation","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/haknz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — haknz","text":"","code":"haknz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/haknz.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example data — haknz","text":"Horn, P.L., Stock assessment hake (Merluccius australis) Chatham Rise (HAK 4) west coast South Island (HAK 7) 2012-13 fishing year. New Zealand Fisheries Assessment Report, 2013/31: 58 p.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/histplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot posterior histograms — histplot","title":"Plot posterior histograms — histplot","text":"Plots histograms posterior samples MCMC chain contained within bdm class object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/histplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot posterior histograms — histplot","text":"","code":"histplot(object, ...)  # S3 method for class 'bdm' histplot(   object,   pars = c(\"r\", \"logK\", \"lp__\"),   inc_warmup = FALSE,   nrow = NULL,   ncol = NULL,   ... )"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/histplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot posterior histograms — histplot","text":"object bdm class object. ... optional arguments geom_histogram pars character vector model parameters plotted. Defaults pars = c('r','logK','lp__'). inc_warmup logical value indicating whether MCMC warmup included plot. nrow passed facet_wrap ncol passed facet_wrap","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/histplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot posterior histograms — histplot","text":"Returns ggplot object can displayed assigned manuipulated using arguments ggplot2 package.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/hoknz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — hoknz","title":"Example data — hoknz","text":"Example catch catch rate data New Zeland hoki (Chatham Rise, Ministry Primary Industries, New Zealand)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/hoknz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — hoknz","text":"","code":"hoknz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/idxplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the bdm model fit — idxplot","title":"Plot the bdm model fit — idxplot","text":"Plots estimated abundance index dynamics time observed values","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/idxplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the bdm model fit — idxplot","text":"","code":"idxplot(object, ...)  # S3 method for class 'bdm' idxplot(object, labels, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/idxplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the bdm model fit — idxplot","text":"object fitted bdm class object. ... additional arguments generic function labels character vector labels index.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/idxplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the bdm model fit — idxplot","text":"Returns ggplot object can displayed assigned manuipulated using arguments ggplot2 package.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/linnz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — linnz","title":"Example data — linnz","text":"Example catch catch rate data New Zeland ling (Ministry Primary Industries, New Zealand)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/linnz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — linnz","text":"","code":"linnz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/optimr.html","id":null,"dir":"Reference","previous_headings":"","what":"Obtain a point estimate by maximizing the joint posterior — optimr","title":"Obtain a point estimate by maximizing the joint posterior — optimr","text":"Execute Bayesian (MAP) model fit using optimizing.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/optimr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Obtain a point estimate by maximizing the joint posterior — optimr","text":"","code":"optimr(object, ...)  # S4 method for class 'bdm' optimr(object, data = list(), run = character(), init = \"random\", ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/optimr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Obtain a point estimate by maximizing the joint posterior — optimr","text":"object compiled bdm class object ... arguments generic function (used) data list object containing model inputs run optional character vector label run init initialisation list, function character string","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/optimr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Obtain a point estimate by maximizing the joint posterior — optimr","text":"Returns bdm object containing MAP estimates.","code":""},{"path":[]},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/optimr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Obtain a point estimate by maximizing the joint posterior — optimr","text":"","code":"# get some data data(albio) dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = albio$year)  # initialize and fit default model if (FALSE) { # \\dontrun{ mdl <- bdm() mdl <- compiler(mdl) mdl <- optimr(mdl, dat) } # }"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/orhnz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — orhnz","title":"Example data — orhnz","text":"Example catch catch rate data New Zeland orange roughy (Chatham Rise, Ministry Primary Industries, New Zealand).","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/orhnz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — orhnz","text":"","code":"orhnz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/plot.bdmData.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot index and harvest data — plot.bdmData","title":"Plot index and harvest data — plot.bdmData","text":"function provides plot method bdmData object class. returns ggplot object can assigned manipulated using functions provided ggplot2.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/plot.bdmData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot index and harvest data — plot.bdmData","text":"","code":"# S3 method for class 'bdmData' plot(x, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/plot.bdmData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot index and harvest data — plot.bdmData","text":"x bdmData object class ... required generic function","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/plot.bdmData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot index and harvest data — plot.bdmData","text":"","code":"# load Indian Ocean albacore data data(albio)  # create bdmData object dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = albio$year)  # plot plot(dat) #> Warning: no non-missing arguments to min; returning Inf #> Warning: no non-missing arguments to max; returning -Inf"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/postplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot posterior updates from bdm model fit — postplot","title":"Plot posterior updates from bdm model fit — postplot","text":"Plots posterior updates \\(r\\) \\(ln(K)\\). Depletion measured biomass carrying capacity, harvest rate catch estimated biomass, surplus production production function multiplied process error residual.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/postplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot posterior updates from bdm model fit — postplot","text":"","code":"postplot(object, ...)  # S3 method for class 'bdm' postplot(object, ..., type = \"histogram\", labels = character())"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/postplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot posterior updates from bdm model fit — postplot","text":"object bdm class object. ... additional arguments generic function type character vector plot type. Must one 'histogram' 'point'. labels character vector labels model run","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/postplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot posterior updates from bdm model fit — postplot","text":"Returns ggplot object can displayed assigned manuipulated using arguments ggplot2 package.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/project.html","id":null,"dir":"Reference","previous_headings":"","what":"Projection function — project","title":"Projection function — project","text":"function can used project default bdm model forward time assuming constant catch (harvest) harvest rate. Multiple alternative scenarios can run simultaneously. Model parameter values sampled joint posterior distribution projection performed sample. correlated random walk process error terms assumed projection.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/project.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Projection function — project","text":"","code":"project(object, harvest_project, ...)  # S4 method for class 'bdm,vector' project(object, harvest_project, time_project, harvest_rate = TRUE)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/project.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Projection function — project","text":"object bdm class object containing fit default model harvest_project constant harvest harvest rate vector across alternative scenarios ... arguments generic function (used) time_project number time steps future projection harvest_rate logical value indicating whether harvest_project refers harvest (catch) harvest rate (catch biomass)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/project.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Projection function — project","text":"Returns list containing elements: run optional run label match corresponding object@run scenarios vector harvest harvest rate scenarios time complete series time step labels nsamples number posterior samples equal object@nsamples biomass array biomass values dimensions: iteration, time, scenario depletion array depletion values dimensions: iteration, time, scenario epsilon_p process error residual matrix harvest catch time series array harvest_rate harvest rate time series array","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/project.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Projection function — project","text":"","code":"if (FALSE) { # \\dontrun{ # get some data data(haknz) dat <- bdmData(harvest = haknz$landings, index = cbind(haknz$survey, haknz$cpue))  # initialize and fit default model mdl <- bdm() mdl <- compiler(mdl) mdl <- sampler(mdl, dat, run = 'example_run')  # constant harvest rate projection scenarios mdl.project <- project(mdl, harvest = c(0.05, 0.10, 0.15), time = 20, harvest_rate = TRUE)  # check label mdl@run mdl.project$run  # extract median values apply(mdl.project$depletion, 2:3, median) apply(mdl.project$harvest, 2:3, median) apply(mdl.project$harvest_rate, 2:3, median)  # constant catch projection scenarios mdl.project <- project(mdl, harvest = c(900, 1200, 1500), time = 20, harvest_rate = FALSE)  # extract median values apply(mdl.project$depletion, 2:3, median) apply(mdl.project$harvest, 2:3, median) apply(mdl.project$harvest_rate, 2:3, median) } # }"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sampler.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit bdm model — sampler","title":"Fit bdm model — sampler","text":"Execute Bayesian model fit using rstan. default Bayesian fit executed call sampling, implements MCMC algorithm. Default values chains, iter, warmup thin follow rstan. init argument can list, function character string. function take arguments return named list intial values estimated parameters. Alternatively list can specified directly. behaviour matches sampling. character string supplied either 'random' 'fixed'. model default model init = 'fixed' sensible starting values r, logK x produced using getr, getlogK getx. model default model init = 'random' sensible starting values obtained sampling priors r, logK, x. model default model, user specify function list, otherwise starting values randomly generated.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sampler.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit bdm model — sampler","text":"","code":"sampler(object, ...)  # S4 method for class 'bdm' sampler(   object,   data = list(),   run = character(),   init,   chains,   iter,   warmup,   thin,   ... )"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sampler.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit bdm model — sampler","text":"object bdm model object ... arguments sampling data list object containing model inputs run optional character vector label run init initialisation list, function character string chains number MCMC chains iter number iterations per chain warmup number iterations discarded thin sampling interval chains","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sampler.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit bdm model — sampler","text":"Returns bdm object containing posterior samples contained object@trace.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sampler.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit bdm model — sampler","text":"","code":"# get some data data(albio) dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = albio$year)  # initialize and fit default model if (FALSE) { # \\dontrun{ mdl <- bdm() mdl <- compiler(mdl) mdl <- sampler(mdl, dat) } # }"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/shape.html","id":null,"dir":"Reference","previous_headings":"","what":"Access or assign shape of the production function — shape","title":"Access or assign shape of the production function — shape","text":"function can used access assign shape generalised production function. shape assumed fixed input therefore contained within bdmData object class parameter \\(n\\).","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/shape.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Access or assign shape of the production function — shape","text":"","code":"shape(object, ...)  # S4 method for class 'bdmData' shape(object, par = \"phi\")  shape(object, ...) <- value  # S4 method for class 'bdmData,numeric' shape(object) <- value"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/shape.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Access or assign shape of the production function — shape","text":"object bdmData class object ... additional arguments generic function par character string either n phi value numeric value specifying value either n phi","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/shape.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Access or assign shape of the production function — shape","text":"bdm package assumes default generalised Fletcher-Schaefer hybrid production function. inflection points occurs : $$\\phi = B_{MSY}/K = (1/n)^(1/(n-1)).$$ discontinuity relationship \\(phi\\) \\(n\\) accommodated assuming \\(\\phi = 1/e\\) \\(n = 1\\).","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/shape.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Access or assign shape of the production function — shape","text":"","code":"# initialize bdmData object dat <- bdmData(harvest = 20:30, index = runif(11))  # access default shape shape(dat, 'phi') #> [1] 0.5 shape(dat, 'n') #> [1] 2  # assign shape shape(dat) <- 0.4 shape(dat) #> [1] 0.4 shape(dat, 'n') #> [1] 1.188115"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmao.html","id":null,"dir":"Reference","previous_headings":"","what":"Access or assign the observation error — sigmao","title":"Access or assign the observation error — sigmao","text":"default bdm package assumes observation error variance fixed input specified bdmData object class. function can used access assign standard deviation \\(\\sigma_o\\) within bdmData object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmao.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Access or assign the observation error — sigmao","text":"","code":"sigmao(object, ...)  # S4 method for class 'bdmData' sigmao(object)  sigmao(object) <- value  # S4 method for class 'bdmData,numeric' sigmao(object) <- value  # S4 method for class 'bdmData,matrix' sigmao(object) <- value"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmao.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Access or assign the observation error — sigmao","text":"object bdmData object ... additional arguments generic function value numeric vector matrix \\(\\sigma_o\\)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmao.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Access or assign the observation error — sigmao","text":"Accessor function returns matrix \\(\\sigma_o\\) values. Assignment function populates bdmData object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmao.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Access or assign the observation error — sigmao","text":"Observation error used refer deviation abundance observation deterministic expectation: $$ E[I_{t}] = qB_{t} $$ \\(B\\) biomass, \\(\\) abundance index \\(q\\) catchability scalar, estimated analytically nuisance parameter. observation error time variant assumed default follow log-normal distribution: $$ I_{t} \\sim LN(ln(E[I_{t}])-\\sigma^2_{o,t}/2, \\sigma^2_{o,t}) $$ distribution \\(\\) around value predicted model can due variety difference uncertainties, just observation, sometimes referred total error. Realistic values observation error typically informed standardisation abundance index time series. default value \\(\\sigma_o = 0.2\\) time points.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmao.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Access or assign the observation error — sigmao","text":"","code":"# initialize bdmData object dat <- bdmData(harvest = 20:30, index = cbind(runif(11), runif(11)))  # assign single value sigmao(dat) <- 0.1 sigmao(dat) #>       [,1] [,2] #>  [1,]  0.1  0.1 #>  [2,]  0.1  0.1 #>  [3,]  0.1  0.1 #>  [4,]  0.1  0.1 #>  [5,]  0.1  0.1 #>  [6,]  0.1  0.1 #>  [7,]  0.1  0.1 #>  [8,]  0.1  0.1 #>  [9,]  0.1  0.1 #> [10,]  0.1  0.1 #> [11,]  0.1  0.1  # assign values specific # to each index sigmao(dat) <- c(0.05, 0.1) sigmao(dat) #>       [,1] [,2] #>  [1,] 0.05  0.1 #>  [2,] 0.05  0.1 #>  [3,] 0.05  0.1 #>  [4,] 0.05  0.1 #>  [5,] 0.05  0.1 #>  [6,] 0.05  0.1 #>  [7,] 0.05  0.1 #>  [8,] 0.05  0.1 #>  [9,] 0.05  0.1 #> [10,] 0.05  0.1 #> [11,] 0.05  0.1  # assign values specific # to each time sigmao(dat) <- seq(0.05, 0.2, length = 11) sigmao(dat) #>        [,1]  [,2] #>  [1,] 0.050 0.050 #>  [2,] 0.065 0.065 #>  [3,] 0.080 0.080 #>  [4,] 0.095 0.095 #>  [5,] 0.110 0.110 #>  [6,] 0.125 0.125 #>  [7,] 0.140 0.140 #>  [8,] 0.155 0.155 #>  [9,] 0.170 0.170 #> [10,] 0.185 0.185 #> [11,] 0.200 0.200  # assign values specific # to each time and index sigmao(dat) <- matrix(runif(22), nrow = 11) sigmao(dat) #>            [,1]       [,2] #>  [1,] 0.3542068 0.44670247 #>  [2,] 0.8251994 0.37151118 #>  [3,] 0.2738182 0.02806097 #>  [4,] 0.5700450 0.46598719 #>  [5,] 0.3357191 0.39003139 #>  [6,] 0.5962628 0.02006522 #>  [7,] 0.1915180 0.37697093 #>  [8,] 0.9477639 0.55991284 #>  [9,] 0.5424804 0.85708359 #> [10,] 0.5446034 0.38480971 #> [11,] 0.2785972 0.52791704"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmap.html","id":null,"dir":"Reference","previous_headings":"","what":"Access or assign the process error — sigmap","title":"Access or assign the process error — sigmap","text":"default bdm package assumes process error variance fixed input specified bdmData object class. function can used access assign standard deviation \\(\\sigma_p\\) within bdmData object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Access or assign the process error — sigmap","text":"","code":"sigmap(object, ...)  # S4 method for class 'bdmData' sigmap(object)  sigmap(object) <- value  # S4 method for class 'bdmData,numeric' sigmap(object) <- value"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Access or assign the process error — sigmap","text":"object bdmData object ... additional arguments generic function value numeric value \\(\\sigma_p\\)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Access or assign the process error — sigmap","text":"Accessor function returns numeric value. Assignment function populates bdmData object.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Access or assign the process error — sigmap","text":"Process error used refer deviation process equation deterministic expectation: $$ E[B_{t+1}] = max(B_{t} + g(B_{t}) - H_{t}, 0) $$ \\(B\\) biomass, \\(g()\\) production function \\(H\\) catch (harvest). process error assumed default follow log-normal distribution: $$ B_{t+1} \\sim LN(ln(E[B_{t+1}])-\\sigma^2_p/2, \\sigma^2_p) $$ Realistic values process error typically \\(0.05 < \\sigma_p < 0.15\\). default value \\(\\sigma_p = 0.05\\).","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sigmap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Access or assign the process error — sigmap","text":"","code":"# initialize bdmData object dat <- bdmData(harvest = 20:30, index = runif(11))  # assign and access sigmap sigmap(dat) <- 0.1 sigmap(dat) #> [1] 0.1"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sponz.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data — sponz","title":"Example data — sponz","text":"Example catch catch rate data New Zeland rig (SPO7, Ministry Primary Industries, New Zealand)","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/sponz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data — sponz","text":"","code":"sponz"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/status.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract status and reference point estimates — status","title":"Extract status and reference point estimates — status","text":"functions can used extract output values following model fit. status function look return model elements current_biomass, current_depletion current_harvest_rate. refpoints function look return model elements msy, depletion_at_msy, biomass_at_msy harvest_rate_at_msy. returned default bdm model, function also work user-specified model contains potentially different elements 'generated quantities {}' block code, long specified pars argument.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract status and reference point estimates — status","text":"","code":"status(object, ...)  # S4 method for class 'bdm' status(object, pars)  refpoints(object, ...)  # S4 method for class 'bdm' refpoints(object, pars)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract status and reference point estimates — status","text":"object bdm model object ... additional arguments generic function pars character vector specifiying parameters returned","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract status and reference point estimates — status","text":"Returns list containing specified elements, vector equal number posterior samples.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/status.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract status and reference point estimates — status","text":"","code":"data(albio) dat <- bdmData(harvest = albio$catch, index = albio$cpue, time = rownames(albio))  if (FALSE) { # \\dontrun{ # initialize and fit default model mdl <- bdm() mdl <- compiler(mdl) mdl <- sampler(mdl, dat)  # get median status estimates lapply(status(mdl), median)  # get median reference point estimates lapply(refpoints(mdl), median) } # }"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/traceplot-bdm-method.html","id":null,"dir":"Reference","previous_headings":"","what":"Traceplot for MCMC output — traceplot,bdm-method","title":"Traceplot for MCMC output — traceplot,bdm-method","text":"Plots trace outputs MCMC run implemented using sampler. function uses S4 generic traceplot provided rstan.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/traceplot-bdm-method.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Traceplot for MCMC output — traceplot,bdm-method","text":"","code":"# S4 method for class 'bdm' traceplot(   object,   pars = c(\"r\", \"logK\", \"lp__\"),   inc_warmup = TRUE,   nrow = NULL,   ncol = NULL,   ... )"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/traceplot-bdm-method.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Traceplot for MCMC output — traceplot,bdm-method","text":"object bdm object pars parameters plotted inc_warmup logical value indicating whether warmup values included nrow passed facet_wrap ncol passed facet_wrap ... optional arguments geom_line","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/traceplot-bdm-method.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Traceplot for MCMC output — traceplot,bdm-method","text":"Returns ggplot object can displayed assigned manipulated using arguments ggplot2 package.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/updatePrior.html","id":null,"dir":"Reference","previous_headings":"","what":"Update priors in bdm model — updatePrior","title":"Update priors in bdm model — updatePrior","text":"function can used update priors \\(r\\) \\(ln(K)\\). bdm package default assumes prior \\(r\\) log-normal prior \\(ln(K)\\) uniform. function supplied prior class object extract log-normal distribution parameters \\(r\\) use regular expression matching update model code. function provided named list can used update priors \\(r\\), \\(ln(K)\\) initial depletion \\(x0\\), similar manner. See examples list arguments specified. default function updates model code. model need re-compiled run changes take effect.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/updatePrior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update priors in bdm model — updatePrior","text":"","code":"updatePrior(object, ...)  # S3 method for class 'bdm' updatePrior(object, prior, ...)"},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/updatePrior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update priors in bdm model — updatePrior","text":"object bdm class object ... additional arguments generic function prior prior class object list object containing information update prior","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/updatePrior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update priors in bdm model — updatePrior","text":"Returns bdm object updated model code.","code":""},{"path":"https://github.com/biomass-dynamic-models/bdm/reference/updatePrior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Update priors in bdm model — updatePrior","text":"","code":"# initialise default model mdl <- bdm()  # update prior for r mdl <- updatePrior(mdl, list(par = 'r', meanlog = -1.1, sdlog = 0.1)) #> re-compile the model before running sampler()  # update prior for logK mdl <- updatePrior(mdl, list(par = 'logK', min = 1, max = 100)) #> re-compile the model before running sampler()  # update prior for initial depletion mdl <- updatePrior(mdl, list(par = 'x0', meanlog = log(0.8), sdlog = 0.01)) #> re-compile the model before running sampler()  # check updates getr(mdl) #> $`E[log(r)]` #> [1] -1.1 #>  #> $`SD[log(r)]` #> [1] 0.1 #>  #> $`E[r]` #> [1] 0.3345396 #>  #> $`VAR[r]` #> [1] 0.001124782 #>  #> $`CV[r]` #> [1] 0.1002505 #>  getlogK(mdl) #> $`E[logK]` #> NULL #>  #> $`min[logK]` #> [1] 1 #>  #> $`max[logK]` #> [1] 100 #>   # update using a prior class # object library(lhm) #> lhm version 1.0.0  # create object containing # vector of r values iter <- 100 mu <- 0.1 cv <- 0.2 sd <- sqrt(log(1+cv^2)) x <- rlnorm(iter,log(mu)-sd^2/2,sd) r <- prior(x)  # update model mdl <- updatePrior(mdl, r) #> re-compile the model before running sampler()  # check update mean(log(r)) #> [1] -2.303153 getr(mdl)[['E[log(x)]']] #> NULL"}]
